
version: '3.4'

services:
  rabbitmq:
    image: rabbitmq:3-management-alpine
    ports:
      - "15672:15672"
      - "5671:5671"
      - "5672:5672"
    environment:
      RABBITMQ_DEFAULT_PASS: password
      RABBITMQ_DEFAULT_USER: admin

  zipkin:
    image: openzipkin/zipkin
    container_name: zipkin
    ports:
      # Port used for the Zipkin UI and HTTP Api
      - 9411:9411

  # order.api:
  #   build:
  #     context: .
  #     dockerfile: NET6.Microservice.Order.API/Dockerfile
  #   ports:
  #     - "5089:80"
  #   environment:
  #     - ASPNETCORE_ENVIRONMENT=Development
  #     - Serilog:WriteTo:0:Args:path=/app/logs/NET6.Microservice.Order.API.logs.json
  #     - MassTransit:MessageBusRabbitMQ=amqp://admin:password@rabbitmq:5671/
  #     - OpenTelemetry:ZipkinURI=http://zipkin:9411/api/v2/spans/
  #   depends_on:
  #     - rabbitmq

  # catalog.api:
  #   build:
  #     context: .
  #     dockerfile: NET6.Microservice.Catalog.API/Dockerfile
  #   ports:
  #     - "5226:80"
  #   environment:
  #     #- ASPNETCORE_ENVIRONMENT=Development
  #     - Serilog:WriteTo:0:Args:path=/app/logs/NET6.Microservice.Catalog.API.logs.json
  #     - MassTransit:MessageBusRabbitMQ=amqp://admin:password@rabbitmq:5671/
  #   depends_on:
  #     - rabbitmq

  # workerservice:
  #   build:
  #     context: .
  #     dockerfile: NET6.Microservice.WorkerService/Dockerfile
  #   environment:
  #     #- ASPNETCORE_ENVIRONMENT=Development
  #     - Serilog:WriteTo:0:Args:path=/app/logs/NET6.Microservice.WorkerService.logs.json
  #     - MassTransit:MessageBusRabbitMQ=amqp://admin:password@rabbitmq:5671/
  #     - OpenTelemetry:ZipkinURI=http://zipkin:9411/api/v2/spans/
  #   depends_on:
  #     - rabbitmq
